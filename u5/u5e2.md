# T1. Uso avanzado de funciones

## Unidad 5. Closures

## Ejercicio 1.5.2 (Castellano)

Implementa una función `numberArray` que nos permitirá crear objetos de un tipo de array especial que:

- No permite inicializarse más de una vez.
- Puede establecer un número máximo de elementos.
- Controla que sus elementos sean exclusivamente números.
- Modifica el comportamiento básico de un array al añadir y eliminar elementos, para garantizar los puntos anteriores.

Para ello la función empleará el concepto de **closure**, de manera que encapsule la estructura de array que almacenará la información y exponga solamente los métodos y propiedades deseados.

Cuando la función `numberArray` es llamada, para crear la **closure**, devolverá un objeto que expone las siguientes propiedades:

- `init`: que corresponderá a la función `init` de la **closure** que se describe más adelante.
- `initialized`: que corresponderá a la función `initialized` de la **closure** que se definirá más adelante.
- `length`: que corresponderá a la función `length` de la **closure** que se definirá más adelante.
- `items`: que corresponderá a la función `getList` de la **closure** que se definirá más adelante.
- `add`: que corresponderá a la función `add` de la **closure** que se definirá más adelante.
- `remove`: que se corresponderá a la función `remove` de la **closure** que se definirá más adelante.

La función que actuará como **closure** ha de disponer a nivel interno de unas variables y constantes, además de las aportadas inicialmente:

- `_list`: array interno que almacenará de forma efectiva la lista de números de la estructura que estamos desarrollando.
- `_max`: constante con el valor de la longitud máxima del array `_list`.

Y obviamente una serie de funciones para la gestión de la funcionalidad deseada:


### A. Función `init`

Este método recibe (es obligatorio) como parámetro un array de números y lo asigna internamente a su variable `_list` siempre que:

- No haya sido YA inicializado, en cuyo caso devolverá el **string** almacenado en la constante `ERROR_1`.
- La longitud del array de números con el que inicializar `_list` no sea superior a la permitida (`_max`) en cuyo caso devolverá el **string** almacenado en la constante `ERROR_2`.
- Todos los elementos del array pasado como parámetro sean números, en caso contrario devolverá el **string** almacenado en la constante `ERROR_3`
- Si todo es correcto, además de inicializar `_list` con el array recibido como parámetro, devolverá `true`.


### B. Función `initialized`

Devuelve si la estructura ya ha sido inicializada o no comprobando que `_list` no sea `undefined`.


### C. Función `_checkItems`

Recibe un array de elementos y comprueba que todos sean números. Devuelve `true` o `false` en función de si se cumple esa condición o no.


### D. Función `_addItem`

Recibe como parámetro un número y lo añade al array `_list` siempre que no se supere el máximo número de elementos permitidos. Si no puede realizar la operación por superar el número máximo de elementos devolverá `false` y si la puede llevar a término con éxito devolverá `true`


### E. Función `_removeItem`

Recibe como parámetro un número y borra la primera coincidencia que encuentre en `_list`. Tanto si lo encuentra como si no, la función devolverá **siempre** `true`.


### F. Función `length`

Devuelve la longitud de la lista interna de números siempre que esta lista haya sido inicializada.


### G. Función `getList`

Devuelve **una COPIA** de la lista interna de números.


### H. Función `add`

Recibe como parámetro `items` que puede ser un número individual o un array de números.

- Comprueba que el/los números recibido son todos efectivamente números mediante el uso de la función `_checkItems`. Si no fueran todos números devolverá la cadena almacenada en la constante `ERROR_3`.

- Si todos son números, va insertando de uno en uno cada número recibido haciendo uso de la función `_addItem`, devolviendo true si todos han podido añadirse la lista o false en caso de que alguno no se haya podido añadir al superar el máximo permitido.


### I. Función `remove`

Recibe como parámetro `items` que puede ser un número individual o un array de números.

- Comprueba que el/los números recibido son todos efectivamente números mediante el uso de la función `_checkItems`. Si no fueran todos números devolverá la cadena almacenada en la constante `ERROR_3`.

- Si todos son números, irá eliminando de uno en uno cada número recibido haciendo uso de la función `_removeItem`, devolviendo `true` al final del proceso.


-------------------


# T1. Ús avançat de funcions

## Unitat 5. Closures

## Exercici 1.5.2 (Català)

Implementa una funció `numberArray` que ens permetrà crear objectes d'un tipus d'array especial que:

- No permet inicialitzar-se més d'una vegada.
- Pot establir un nombre màxim d'elements.
- Controla que els seus elements siguin exclusivament números.
- Modifica el comportament bàsic d'un array a l'afegir i eliminar elements per garantir els punts anteriors.

Per això la funció emprarà el concepte de **closure**, de manera que encapsuli l'estructura d'array que emmagatzemarà la informació i exposi només els mètodes i propietats desitjats.

Quan la funció `numberArray` és cridada, per crear la **closure**, tornarà un objecte que exposa les propietats següents:

- `init`: que correspondrà a la funció `init` de la **closure** que es descriu més endavant.
- `initialized`: que correspondrà a la funció `initialized` de la **closure** que es definirà més endavant.
- `length`: que correspondrà a la funció `length` de la **closure** que es definirà més endavant.
- `items`: que correspondrà a la funció `getList` de la **closure** que es definirà més endavant.
- `add`: que correspondrà a la funció `add` de la **closure** que es definirà més endavant.
- `remove`: que es correspondrà a la funció `remove` de la **closure** que es definirà més endavant.

La funció que actuarà com a **closure** ha de disposar a nivell intern d'unes variables i constants, a més de les aportades inicialment:

- `_list`: array intern que emmagatzemarà de manera efectiva la llista de números de l'estructura que estem desenvolupant.
- `_max`: constant amb el valor de la longitud màxima de l'array `_list`.

I òbviament una sèrie de funcions per a la gestió de la funcionalitat desitjada:


### A. Funció `init`

Aquest mètode rep (és obligatori) com a paràmetre un array de números i l'assigna internament a la seva variable `_list` sempre que:

- No hagi estat JA inicialitzat, en aquest cas tornarà el **string** emmagatzemat a la constant `ERROR_1`.
- La longitud de l'array de números amb què inicialitzar `_list` no sigui superior a la permesa (`_max`) en aquest cas retornarà el **string** emmagatzemat a la constant `ERROR_2`.
- Tots els elements de l'array passat com a paràmetre siguin números, en cas contrari tornarà el **string** emmagatzemat a la constant `ERROR_3`
- Si tot és correcte, a més d'inicialitzar `_list` amb l'array rebut com a paràmetre, tornarà `true`.


### B. Funció `initialized`

Retorna si l'estructura ja ha estat inicialitzada o no comprovant que `_list` no sigui undefined.


### C. Funció `_checkItems`

Rep un array d'elements i comprova que tots siguin números. Torna `true` o `false` en funció de si es compleix aquesta condició o no.


### D. Funció `_addItem`

Rep com a paràmetre un número i l'afegeix a l'array `_list` sempre que no se superi el màxim nombre d'elements permesos. Si no pot realitzar l'operació per superar el nombre màxim d'elements tornarà `false` i si la pot portar a termini amb èxit tornarà `true`


### E. Funció `_removeItem`

Rep com a paràmetre un número i esborra la primera coincidència que trobi a `_list`. Tant si ho troba com si no, la funció tornarà **sempre** `true`.


### F. Funció `length`

Torna la longitud de la llista interna de números sempre que aquesta llista hagi estat inicialitzada.


### G. Funció `getList`

Torna **una CÒPIA** de la llista interna de números.


### H. Funció `add`

Rep com a paràmetre `items` que pot ser un número individual o un array de números.

- Comprova que els números rebuts són tots efectivament números mitjançant l'ús de la funció `_checkItems`. Si no fossin tots números tornarà la cadena emmagatzemada a la constant `ERROR_3`.

- Si tots són números, va inserint d'un en un cada número rebut fent ús de la funció `_addItem`, tornant true si tots s'han pogut afegir la llista o false en cas que algun no s'hagi pogut afegir en superar el màxim permès .


### I. Funció `remove`

Rep com a paràmetre `items` que pot ser un número individual o un array de números.

- Comprova que els números rebuts són tots efectivament números mitjançant l'ús de la funció `_checkItems`. Si no fossin tots números tornarà la cadena emmagatzemada a la constant `ERROR_3`.

- Si tots són números, anirà eliminant d'un en un cada número rebut fent ús de la funció `_removeItem`, retornant `true` al final del procés.
